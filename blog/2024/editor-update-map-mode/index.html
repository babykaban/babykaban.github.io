<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="kL2NjtvChhJi-npbtl_4yNZj2UKrGmStbdgOgqRS8lU"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Expanding the World Map Editor Mode | BabyKaban </title> <meta name="author" content="Paul I. Solodrai"> <meta name="description" content="Editor update"> <meta name="keywords" content="blog, spellweaver saga, spellweaver, solodrai, babykaban, game engine"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/site_logo.jpeg?012e7a2c5e17fa21c2b2e608cf0cdb38"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://babykaban.github.io/blog/2024/editor-update-map-mode/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> BabyKaban </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">GitHub Repositories </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Expanding the World Map Editor Mode</h1> <p class="post-meta"> Created in August 04, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/category/blog"> <i class="fa-solid fa-tag fa-sm"></i> blog</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Hello, Spellweavers!</p> <p>I’m back with another update on the development of <strong>Spellweaver Saga: Retrieving The Legendary Relic</strong>. Over the past week, I’ve been focusing on enhancing the editor, particularly in creating and managing world maps. Let’s dive into new features that have been added!</p> <h2 id="creating-and-loading-world-maps">Creating and Loading World Maps</h2> <p>One of the advancements is the ability to create and load world maps directly within the editor. Now, you can easily start a new map or load an existing one, making the process of building your game world more efficient. Once you’ve selected the map you’ll be working on, you can choose tilesets loaded with the asset file, giving you full control over the terrain and environment.</p> <h2 id="enhanced-tile-selection-with-scrollable-window">Enhanced Tile Selection with Scrollable Window</h2> <p>To make tile placement more intuitive, I’ve introduced a scrollable tile selection window that appears at the top of the screen. You can now easily browse through your tilesets by scrolling the mouse wheel, making it quicker to find the right tile for the job.</p> <h2 id="introducing-tile-layers-for-better-sorting">Introducing Tile Layers for Better Sorting</h2> <p>To improve the visual organization and layering of tiles, I’ve implemented tile layers with different Z coordinates. Think of it as a z-buffer for tiles—this addition enhances the sorting of tiles, ensuring that everything displays correctly in the game environment.</p> <h2 id="auto-saving-and-map-bounds-checking">Auto-Saving and Map Bounds Checking</h2> <p>Building a robust and user-friendly editor means thinking ahead about potential issues. To prevent any mishaps, I’ve added an auto-save feature and additional checks for map bounds. This ensures that your progress is saved regularly, and any work outside the map’s limits is caught early.</p> <h2 id="tile-flood-fill-functionality">Tile Flood Fill Functionality</h2> <p>One of the most exciting features is the tile flood fill function, which allows you to fill large areas with a specific tile easily. Here’s a peek into the code that makes it all happen:</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">internal</span> <span class="kt">void</span>
<span class="nf">TileFloodFill</span><span class="p">(</span><span class="n">action_stack</span> <span class="o">*</span><span class="n">UndoStack</span><span class="p">,</span> <span class="n">world</span> <span class="o">*</span><span class="n">World</span><span class="p">,</span> <span class="n">world_position</span> <span class="n">StartP</span><span class="p">,</span> <span class="n">ssa_tile</span> <span class="n">NewTile</span><span class="p">,</span> <span class="n">u32</span> <span class="n">ZLayer</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">sswm_ground_tile</span> <span class="o">*</span><span class="n">TargetGroundTiles</span> <span class="o">=</span> <span class="n">GetWorldMapGroundTile</span><span class="p">(</span><span class="n">World</span><span class="p">,</span> <span class="n">StartP</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">TargetGroundTiles</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">u32</span> <span class="n">TargetChecksum</span> <span class="o">=</span> <span class="n">TargetGroundTiles</span><span class="o">-&gt;</span><span class="n">CheckSum</span><span class="p">[</span><span class="n">ZLayer</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="n">TargetChecksum</span> <span class="o">!=</span> <span class="n">NewTile</span><span class="p">.</span><span class="n">CheckSum</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">editor_action</span> <span class="n">FloodFillAction</span> <span class="o">=</span> <span class="p">{};</span>
            <span class="n">FloodFillAction</span><span class="p">.</span><span class="n">Type</span> <span class="o">=</span> <span class="n">Action_FloodFill</span><span class="p">;</span>
            <span class="n">FloodFillAction</span><span class="p">.</span><span class="n">FloodFill</span><span class="p">.</span><span class="n">TileCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="n">FloodFillAction</span><span class="p">.</span><span class="n">FloodFill</span><span class="p">.</span><span class="n">PrevTiles</span> <span class="o">=</span> <span class="p">(</span><span class="n">sswm_ground_tile</span> <span class="o">*</span><span class="p">)</span><span class="n">Platform</span><span class="p">.</span><span class="n">AllocateMemory</span><span class="p">(</span><span class="n">MAX_FILL_TILES</span><span class="o">*</span><span class="nf">sizeof</span><span class="p">(</span><span class="n">sswm_ground_tile</span><span class="p">));</span>

            <span class="n">tile_queue</span> <span class="n">Queue</span> <span class="o">=</span> <span class="p">{};</span>
            <span class="n">Queue</span><span class="p">.</span><span class="n">Front</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="n">Queue</span><span class="p">.</span><span class="n">Rear</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="n">EnQueue</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Queue</span><span class="p">,</span> <span class="n">StartP</span><span class="p">);</span>

            <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">IsEmpty</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Queue</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">world_position</span> <span class="n">P</span> <span class="o">=</span> <span class="n">DeQueue</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Queue</span><span class="p">);</span>

                <span class="n">sswm_ground_tile</span> <span class="o">*</span><span class="n">GroundTile</span> <span class="o">=</span> <span class="n">GetWorldMapGroundTile</span><span class="p">(</span><span class="n">World</span><span class="p">,</span> <span class="n">P</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="n">GroundTile</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">GroundTile</span><span class="o">-&gt;</span><span class="n">CheckSum</span><span class="p">[</span><span class="n">ZLayer</span><span class="p">]</span> <span class="o">==</span> <span class="n">TargetChecksum</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">Copy</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">sswm_ground_tile</span><span class="p">),</span> <span class="n">GroundTile</span><span class="p">,</span> <span class="n">FloodFillAction</span><span class="p">.</span><span class="n">FloodFill</span><span class="p">.</span><span class="n">PrevTiles</span> <span class="o">+</span> <span class="n">FloodFillAction</span><span class="p">.</span><span class="n">FloodFill</span><span class="p">.</span><span class="n">TileCount</span><span class="o">++</span><span class="p">);</span>

                        <span class="n">AddGroundTile</span><span class="p">(</span><span class="n">UndoStack</span><span class="p">,</span> <span class="n">World</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">NewTile</span><span class="p">,</span> <span class="n">ZLayer</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
                        
                        <span class="k">if</span><span class="p">(</span><span class="n">TileIsValid</span><span class="p">(</span><span class="n">World</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileX</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileY</span><span class="p">))</span>
                        <span class="p">{</span>
                            <span class="n">EnQueue</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Queue</span><span class="p">,</span> <span class="n">CenteredTilePoint</span><span class="p">(</span><span class="n">World</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileX</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileY</span><span class="p">));</span>
                        <span class="p">}</span>

                        <span class="k">if</span><span class="p">(</span><span class="n">TileIsValid</span><span class="p">(</span><span class="n">World</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileX</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileY</span><span class="p">))</span>
                        <span class="p">{</span>
                            <span class="n">EnQueue</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Queue</span><span class="p">,</span> <span class="n">CenteredTilePoint</span><span class="p">(</span><span class="n">World</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileX</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileY</span><span class="p">));</span>
                        <span class="p">}</span>

                        <span class="k">if</span><span class="p">(</span><span class="n">TileIsValid</span><span class="p">(</span><span class="n">World</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileX</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileY</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
                        <span class="p">{</span>
                            <span class="n">EnQueue</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Queue</span><span class="p">,</span> <span class="n">CenteredTilePoint</span><span class="p">(</span><span class="n">World</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileX</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileY</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span>
                        <span class="p">}</span>

                        <span class="k">if</span><span class="p">(</span><span class="n">TileIsValid</span><span class="p">(</span><span class="n">World</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileX</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileY</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
                        <span class="p">{</span>
                            <span class="n">EnQueue</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Queue</span><span class="p">,</span> <span class="n">CenteredTilePoint</span><span class="p">(</span><span class="n">World</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileX</span><span class="p">,</span> <span class="n">P</span><span class="p">.</span><span class="n">TileY</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="n">PushOnActionStack</span><span class="p">(</span><span class="n">UndoStack</span><span class="p">,</span> <span class="n">FloodFillAction</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>This function not only simplifies the tile placement process but also supports undo actions, allowing for greater flexibility and creativity while building your world.</p> <h2 id="implementing-undo-and-redo-functionality">Implementing Undo and Redo Functionality</h2> <p>After spending some time working with these new tools, I realized how crucial it was to have the ability to undo and redo actions. To address this, I introduced an <code class="language-plaintext highlighter-rouge">action_stack</code> system that can store and manage actions, allowing you to revert or reapply them as needed. Here’s a look at how this system works:</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define MAX_UNDO_ACTIONS 128
</span><span class="k">struct</span> <span class="nc">action_stack</span>
<span class="p">{</span>
    <span class="n">editor_action</span> <span class="o">*</span><span class="n">Actions</span><span class="p">;</span>
    <span class="n">s32</span> <span class="n">Start</span><span class="p">;</span>
    <span class="n">s32</span> <span class="n">End</span><span class="p">;</span>
    <span class="n">u32</span> <span class="n">Size</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div> <p>This <code class="language-plaintext highlighter-rouge">action_stack</code> structure holds an array of <code class="language-plaintext highlighter-rouge">editor_action</code> objects, as well as pointers to the start and end of the stack, and a size indicator. It can store up to 128 actions for undoing and redoing.</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="nc">editor_action</span>
<span class="p">{</span>
    <span class="n">action_type</span> <span class="n">Type</span><span class="p">;</span>
    <span class="k">union</span>
    <span class="p">{</span>
        <span class="n">sswm_ground_tile</span> <span class="n">PrevTile</span><span class="p">;</span>
        <span class="n">flood_fill_action</span> <span class="n">FloodFill</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">};</span>
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">editor_action</code> structure includes the type of action and a union to hold the relevant data for undoing or redoing the action. This allows for flexibility in handling different types of actions, whether it’s a simple tile change or a complex flood fill.</p> <p>Here are a few utility functions that manage the stack:</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">inline</span> <span class="kt">void</span>
<span class="nf">InitActionStack</span><span class="p">(</span><span class="n">action_stack</span> <span class="o">*</span><span class="n">Stack</span><span class="p">,</span> <span class="n">memory_arena</span> <span class="o">*</span><span class="n">Arena</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Stack</span><span class="o">-&gt;</span><span class="n">Actions</span> <span class="o">=</span> <span class="n">PushArray</span><span class="p">(</span><span class="n">Arena</span><span class="p">,</span> <span class="n">MAX_UNDO_ACTIONS</span><span class="p">,</span> <span class="n">editor_action</span><span class="p">);</span>
    <span class="n">Stack</span><span class="o">-&gt;</span><span class="n">Start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">Stack</span><span class="o">-&gt;</span><span class="n">End</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">Stack</span><span class="o">-&gt;</span><span class="n">Size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">InitActionStack</code> initializes the stack, setting up the memory for storing actions and resetting the start, end, and size indicators.</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">inline</span> <span class="n">b32</span>
<span class="nf">IsActionStackEmpty</span><span class="p">(</span><span class="n">action_stack</span> <span class="o">*</span><span class="n">Stack</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">b32</span> <span class="n">Result</span> <span class="o">=</span> <span class="p">(</span><span class="n">Stack</span><span class="o">-&gt;</span><span class="n">Size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">return</span><span class="p">(</span><span class="n">Result</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">IsActionStackEmpty</code> checks if the stack is empty by evaluating the size.</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">internal</span> <span class="kt">void</span>
<span class="nf">PushOnActionStack</span><span class="p">(</span><span class="n">action_stack</span> <span class="o">*</span><span class="n">Stack</span><span class="p">,</span> <span class="n">editor_action</span> <span class="n">Action</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Stack</span><span class="o">-&gt;</span><span class="n">Actions</span><span class="p">[</span><span class="n">Stack</span><span class="o">-&gt;</span><span class="n">End</span><span class="p">]</span> <span class="o">=</span> <span class="n">Action</span><span class="p">;</span>
    <span class="n">Stack</span><span class="o">-&gt;</span><span class="n">End</span> <span class="o">=</span> <span class="p">(</span><span class="n">Stack</span><span class="o">-&gt;</span><span class="n">End</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">MAX_UNDO_ACTIONS</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="n">Stack</span><span class="o">-&gt;</span><span class="n">Size</span> <span class="o">&lt;</span> <span class="n">MAX_UNDO_ACTIONS</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="o">++</span><span class="n">Stack</span><span class="o">-&gt;</span><span class="n">Size</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">Stack</span><span class="o">-&gt;</span><span class="n">Start</span> <span class="o">=</span> <span class="p">(</span><span class="n">Stack</span><span class="o">-&gt;</span><span class="n">Start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">MAX_UNDO_ACTIONS</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">PushOnActionStack</code> adds a new action to the stack. If the stack is full, it overwrites the oldest action.</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">internal</span> <span class="n">editor_action</span> <span class="o">*</span>
<span class="nf">PopFromActionStack</span><span class="p">(</span><span class="n">action_stack</span> <span class="o">*</span><span class="n">Stack</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">editor_action</span> <span class="o">*</span><span class="n">Result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">IsActionStackEmpty</span><span class="p">(</span><span class="n">Stack</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">Stack</span><span class="o">-&gt;</span><span class="n">End</span> <span class="o">=</span> <span class="p">(</span><span class="n">Stack</span><span class="o">-&gt;</span><span class="n">End</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">MAX_UNDO_ACTIONS</span><span class="p">)</span> <span class="o">%</span> <span class="n">MAX_UNDO_ACTIONS</span><span class="p">;</span>
        <span class="o">--</span><span class="n">Stack</span><span class="o">-&gt;</span><span class="n">Size</span><span class="p">;</span>

        <span class="n">Result</span> <span class="o">=</span> <span class="n">Stack</span><span class="o">-&gt;</span><span class="n">Actions</span> <span class="o">+</span> <span class="n">Stack</span><span class="o">-&gt;</span><span class="n">End</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span><span class="p">(</span><span class="n">Result</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">PopFromActionStack</code> removes the most recent action from the stack, allowing it to be undone.</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">inline</span> <span class="kt">void</span>
<span class="nf">ClearStack</span><span class="p">(</span><span class="n">action_stack</span> <span class="o">*</span><span class="n">Stack</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">ZeroArray</span><span class="p">(</span><span class="n">MAX_UNDO_ACTIONS</span><span class="p">,</span> <span class="n">Stack</span><span class="o">-&gt;</span><span class="n">Actions</span><span class="p">);</span>
    <span class="n">Stack</span><span class="o">-&gt;</span><span class="n">Start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">Stack</span><span class="o">-&gt;</span><span class="n">End</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">Stack</span><span class="o">-&gt;</span><span class="n">Size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p>Finally, <code class="language-plaintext highlighter-rouge">ClearStack</code> resets the entire stack, clearing all stored actions.</p> <h2 id="whats-next">What’s Next?</h2> <p>The journey doesn’t end here! I’m already working on implementing navigation meshes and will continue refining the editor to enhance usability and expand its capabilities. My goal is to make building the world of Spellweaver Saga as intuitive and enjoyable as possible. There is a little gallery below, you can check it out.</p> <p>Happy spellweaving, <strong><a href="https://github.com/babykaban" rel="external nofollow noopener" target="_blank">BabyKaban</a></strong></p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/editor_picture_0-480.webp 480w,/assets/img/editor_picture_0-800.webp 800w,/assets/img/editor_picture_0-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/editor_picture_0.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/editor_picture_1-480.webp 480w,/assets/img/editor_picture_1-800.webp 800w,/assets/img/editor_picture_1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/editor_picture_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/editor_picture_2-480.webp 480w,/assets/img/editor_picture_2-800.webp 800w,/assets/img/editor_picture_2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/editor_picture_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/editor_picture_3-480.webp 480w,/assets/img/editor_picture_3-800.webp 800w,/assets/img/editor_picture_3-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/editor_picture_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/editor_picture_4-480.webp 480w,/assets/img/editor_picture_4-800.webp 800w,/assets/img/editor_picture_4-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/editor_picture_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/editor_picture_5-480.webp 480w,/assets/img/editor_picture_5-800.webp 800w,/assets/img/editor_picture_5-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/editor_picture_5.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/editor-update-triangle-subtraction/">Triangle Boolean Subtraction</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/editor-update-sswm-format/">Introducing Spellweaver Saga World Map (SSWM)</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/welcome-to-the-spellweaver-saga-blog/">Welcome to the Spellweaver Saga Blog!</a> </li> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 Paul I. Solodrai. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: August 25, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-89DCRVDVVQ"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-89DCRVDVVQ");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"About",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"Blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-projects",title:"Projects",description:"This is a collaction of projects that I&#39;ve been working on or worked on.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-github-repositories",title:"GitHub Repositories",description:"",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"post-triangle-boolean-subtraction",title:"Triangle Boolean Subtraction",description:"Editor update",section:"Posts",handler:()=>{window.location.href="/blog/2024/editor-update-triangle-subtraction/"}},{id:"post-expanding-the-world-map-editor-mode",title:"Expanding the World Map Editor Mode",description:"Editor update",section:"Posts",handler:()=>{window.location.href="/blog/2024/editor-update-map-mode/"}},{id:"post-introducing-spellweaver-saga-world-map-sswm",title:"Introducing Spellweaver Saga World Map (SSWM)",description:"Editor update",section:"Posts",handler:()=>{window.location.href="/blog/2024/editor-update-sswm-format/"}},{id:"post-welcome-to-the-spellweaver-saga-blog",title:"Welcome to the Spellweaver Saga Blog!",description:"Very First Blog Post",section:"Posts",handler:()=>{window.location.href="/blog/2024/welcome-to-the-spellweaver-saga-blog/"}},{id:"news-very-first-blog-post-is-now-up-blog-2024-welcome-to-the-spellweaver-saga-blog",title:"[Very first blog post is now up!!!](/blog/2024/welcome-to-the-spellweaver-saga-blog/)",description:"",section:"News"},{id:"projects-spellweaver-saga-retrieving-the-legendary-relic",title:"Spellweaver Saga Retrieving The Legendary Relic",description:"This is the first video game that babykaban has been working on.",section:"Projects",handler:()=>{window.location.href="/projects/spellweaver_saga/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%70%61%75%6C%39%32%32%31%39@%70%72%6F%74%6F%6E.%6D%65","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/babykaban","_blank")}},{id:"socials-x",title:"X",description:"Twitter",section:"Socials",handler:()=>{window.open("https://twitter.com/BabyKaban","_blank")}},{id:"socials-youtube",title:"YouTube",section:"Socials",handler:()=>{window.open("https://youtube.com/@BabyKaban","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>